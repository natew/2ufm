// Variables
var w = $(window),
    body = $('body'),
    isProduction = body.is('.production'),
    isOnline = body.is('.signed_in'),
    isNewUser = body.is('.new_user'),
    isAdmin = $('body[data-role="admin"]').length > 0,
    userId = body.data('user'),
    modalShown = false,
    doPageEvents = false,
    navOpen,
    navItems,
    navActive,
    hideWelcome = $.cookie('hideWelcome'),
    hideCorner = $.cookie('hideCorner'),
    cornerBanner = $('#corner-banner'),
    hasNavbar = true,
    shareSong,
    navHovered = [],
    navUnhoveredOnce = false,
    activeParent,
    friendsTemplate = $('#friends-template').html(),
    navbarInterval,
    doPjax = true,
    isTuningIn = typeof(tuneInto) != 'undefined',
    doc,
    navHoverInterval,
    navHoverActive,
    pageLoadTimeout,
    shareCount = 0,
    fakeUrl,
    nextUrl,
    newPage = window.location.pathname,
    disableHovers = false,
    navItems = {},
    _prf = new Perfherder({
        debug: !isProduction,
        track_errors: true
    }),
    genresOpen = $.cookie('genres-open') || false,
    newline = "\n",
    theme = {
      body: $.cookie('theme-body') || 'theme-body-1',
      head: $.cookie('theme-head') || 'theme-head-1'
    };