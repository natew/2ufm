<!doctype html>
<html lang="en">
<head>
  <title>2u.fm</title>

  <!-- Meta -->
  <meta charset="utf-8">
  <%= csrf_meta_tag %>
  <meta name="description" content="">
  <meta name="author" content="Nate Wienert">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

  <!-- TODO: remove -->
  <meta name="robots" content="noindex">

  <!-- HTML5 shim, for IE6-8 support of HTML elements -->
  <!--[if lt IE 9]>
    <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->

  <%= stylesheet_link_tag "application", :debug => Rails.env.development? %>
  <link href='http://fonts.googleapis.com/css?family=Lato:400,700' rel='stylesheet' type='text/css' />
</head>

<body class="<%= user_signed_in? ? 'signed_in' : 'signed_out' %> wizard">
  <header>
    <div class="page-contain">
      <h1><%= link_to '2u.fm', '/', :class => 'tip-n', :title => 'Go Home!' %> </h1>
      <nav>
        <a id="station" href="#" class="control">
          <small>Listening to</small>
          <strong>Nothing, yet!</strong>
        </a>
        <ul>
          <li><%= link 'New', '/songs-new', :id => 'nav-songs-new' %></li>
          <li><%= link 'Popular', '/songs', :id => 'nav-songs' %></li>
          <li><%= link 'Stations', '/blogs', :id => 'nav-blogs' %></li>
          <li><%= link 'Artists', '/artists', :id => 'nav-artists' %></li>
        </ul>
      </nav>

      <div id="bar">
        <div id="player">
          <div id="player-controls" class="player-buttons">
            <%= link_to '<span>4</span>'.html_safe, '#', :class => 'play pictos control', :id => 'player-play', :title => 'Play/pause' %>
            <%= link_to '<span>7</span>'.html_safe, '#', :class => 'next pictos control', :id => 'player-next', :title => 'Next song' %>
          </div>
          <div id="player-main">
            <div id="player-meta">
              <span id="player-artist-name">&nbsp;</span>
              <strong id="player-song-name">&nbsp;</strong>
            </div>
            <div id="player-bottom">
              <div id="player-progress-bar">
                <div id="player-progress-grabber"></div>
                <div id="player-progress-inner-wrap">
                  <div id="player-progress-position"></div>
                  <div id="player-progress-loaded"></div>
                </div>
                <img id="player-progress-waveform" src="/images/transparent.png" />
              </div>
              <div id="player-playlist">
                <ul class="songs">
                  {{#songs}}
                  <li>
                    <a class="control song-{{id}}" href="#song-{{id}}" data-index="{{id}}">
                      <span class="artist">{{artist_name}}</span> - <span class="name">{{name}}</span>
                    </a>
                  </li>
                  {{/songs}}
                </ul>
              </div>
              <%= link_to '>', '#', :class => 'volume pictos control', :id => 'player-volume', :title => 'Volume on/off' %>
              <%= link_to 'k', '#', :class => 'add broadcast-song pictos control tip-n', :id => 'player-add', :title => 'Add to favorites' %>
            </div>
          </div>
        </div>
        <div id="player-invite-container"><a id="player-invite" class="tip-n control disabled" title="Send this song to friends!" data-hover="Copy!" data-click="Copied!">Share!</a></div>

        <div id="player-share">
          <%= link_to 'Share on Facebook', '#', :id => 'share-facebook', :class => 'facebook control popup tip-n', :title => 'Share on Facebook', :'data-dimensions' => '500,500' %>
          <%= link_to 'Share on Twitter', '#', :id => 'share-twitter', :class => 'twitter control popup tip-n', :title => 'Share on Twitter', :'data-dimensions' => '500,500' %>
        </div>
      </div>

      <div id="second-nav">
        <%= link 'Help', '#help', :class => 'modal pictos-help secondary' %>
        <div class="nav-container">
          <%= link 'Get the App!', "/mac", :id => 'get-app', :class => 'nav-control pictos-down control' %>
          <div class="nav-dropdown">
            <%= link 'Download <span>for Mac 10.6</span>'.html_safe, "/mac", :class => 'control', :target => '_blank' %>
          </div>
        </div>
        <% if user_signed_in? %>
        <span id="current_user" data-id="<%= current_user.id %>"></span>
        <div class="nav-container">
          <%= link_to "#{current_user.username}".html_safe, edit_user_registration_path, :id => 'nav-username', :class => 'nav-control control pictos-user' %>
          <div class="nav-dropdown">
            <div id="nav-user">
              <%= link_to "#{image_tag(current_user.avatar.url(:small))} My Station".html_safe, current_user %>
              <%= link_to "Account".html_safe, '/users/edit' %>
              <%= link_to 'Log Out', destroy_user_session_path, :method => 'delete', :class=> 'control' %>
            </div>
          </div>
        </div>
        <% else %>
          <%= link 'Login / Signup', '#new-user', :class => 'modal pictos-key' %>
        <% end %>
      </div>

      <%= form_tag '/main/search', :method => 'get' do %>
        <%= text_field_tag :query, '', :placeholder =>"Search #{number_with_delimiter @count[:songs]} songs by #{number_with_delimiter @count[:artists]} artists" %>
        <%= submit_tag :s, :id => 'search', :class => 'pictos tip-n', :title => 'Search!' %>
      <% end -%>
    </div>
  </header>

  <div id="main-mid">
    <div class="page-contain">
      <div id="announce">
        <div id="announce-contain">
          <strong>The best music from all over the web</strong>
          <span>Follow all your favorite music, create a station and listen with friends!</span>
        </div>
      </div>

      <%- if notice -%>
      <div id="dialog" class="notice"><%= notice %></div>
      <%- elsif alert -%>
      <div id="dialog" class="alert"><%= alert %></div>
      <%- end -%>

      <div id="body">
        <%= yield %>
      </div>

      <footer>
        <!-- <span class="credits">Website thumbnails provided by <a href='http://www.bitpixels.com/'>BitPixels</a></span> -->
      </footer>
    </div>
  </div>

  <a id="debug" class="control" href="">d</a>
  <div id="debug_dump"></div>

  <%= javascript_include_tag "application", :debug => Rails.env.development? %>

  <!-- mathiasbynens.be/notes/async-analytics-snippet Change UA-XXXXX-X to be your site's ID
  <script>
    var _gaq=[['_setAccount','UA-XXXXX-X'],['_trackPageview'],['_trackPageLoadTime']];
    (function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];g.async=1;
    g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
    s.parentNode.insertBefore(g,s)}(document,'script'));
  </script> -->

  <!-- Modals -->
  <div id="overlay"></div>
  <div id="modal"></div>

  <div class="hidden">
    <div id="new-user">
      <h3>Welcome to 2u.fm! <small>Sign up for a free account and always have the best music!</small></h3>
      <div id="user-signup">
        <h4>Signup</h4>
        <%= render :partial => 'registrations/new_form' %>
      </div>
      <div id="user-login">
        <h4>Login</h4>
        <%= render :partial => 'sessions/new_form' %>
      </div>
    </div>

    <div id="help">
      <h3>Help</h3>
      <p>Welcome to 2u.fm!  We are collectors of the latest and greatest music from all around the web.  We find new music and sort it all out so you can sit back and enjoy.  Check out our <strong><%= link_to 'popular', '/popular' %></strong>, <strong><%= link_to 'genre', '/genres' %></strong>, and <strong><%= link_to 'artist', '/artists' %></strong> stations to get a start.
      </p>

      <h4>Keyboard Shortcuts</h4>
      <dl>
        <dt>Space</dt><dd>Pause / Play</dd>
        <dt>Enter</dt><dd>Play highlighted song</dd>
        <dt>Arrow keys</dt><dd>Next / Prev</dd>
      </dl>
    </div>
  </div>
</body>
</html>